<?php
/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//    INCLUDES
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


	namespace Tests\PHPUnit\Feature\Providers;

	// Laravel
	use Tests\PHPUnit\TestCase;
	use Illuminate\Foundation\Testing\RefreshDatabase;
	use Mockery;

	// App
	use App\Providers\TusServiceProvider;



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//    CLASS DECLARATION
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


class TusServiceProviderTest extends TestCase {

	use RefreshDatabase;



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//    DOMAIN
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


	/**
	 * @runInSeparateProcess
	 * @preserveGlobalState disabled
	 */

	public function test_tus_service_provider() {

		// mock tus server
		$tusServer = Mockery::mock('overload:\TusPhp\Tus\Server');
		$tusServer->shouldReceive('setApiPath')->once()->with('/api/backend/tus');
		$tusServer->shouldReceive('setUploadDir')->once();

		// execute and trigger singleton callback
		$provider = new TusServiceProvider($this->app);
		$provider->register();
		$this->app->getBindings()['tus-server']['concrete']($this->app);
	}



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */

} // end class
