<?php
/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//    INCLUDES
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


	namespace Tests\PHPUnit\Feature\Jobs\Base;

	// Laravel
	use Tests\PHPUnit\TestCase;
	use Illuminate\Foundation\Testing\RefreshDatabase;

	// App
	use App\Jobs\Base\ProcessSharingUpload;
	use App\Models\App\Base\Page;



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//    CLASS DECLARATION
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


class ProcessSharingUploadTest extends TestCase {

	use RefreshDatabase;


	protected function setUp(): void {

		parent::setUp();
	}



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//    SHARING IMAGES
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


	public function test_sharing_image_processing() {

		// arrange
		$page = Page::factory()->createOne();
		$propImage = $this->translateProp('social_image');
		$page[$propImage] = $this->createImageFile('test_sharing.jpg');

		// act
		$job = new ProcessSharingUpload($page);
		$job->handle();

		// assert
		$page = Page::find($page->id);
		$this->assertStringContainsString('social-sharing',$page[$propImage]);
	}



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


} // end class

