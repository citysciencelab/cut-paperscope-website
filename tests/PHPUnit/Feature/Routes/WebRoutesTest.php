<?php

/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//    INCLUDES
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


	namespace Tests\PHPUnit\Feature\Routes;

	// Laravel
	use Tests\PHPUnit\TestCase;



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//    CLASS DECLARATION
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


class WebRoutesTest extends TestCase {



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//    DEFAULT ROUTES
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


	public function test_default_app_controller_route() {

		// act
		$response = $this->get('/');

		// assert
		$response->assertStatus(200);
		$response->assertSee('/build/js/app/app-');
		$response->assertSee('/build/css/app-');
	}


	public function test_default_backend_controller_route() {

		// act
		$response = $this->get('/backend');

		// assert
		if($this->hasFeatureBackend()) {

			$response->assertStatus(200);
			$response->assertSee('/build/js/backend/backend-');
			$response->assertSee('/build/css/backend-');
		}
		else {

			$response->assertStatus(301);
			$response->assertDontSee('/build/js/backend/backend-');
			$response->assertDontSee('/build/css/backend-');
		}
	}



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//    APP ROUTES
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


	public function test_app_route_capture() {

		$response = $this->get('/capture-this-route');

		$response->assertStatus(200);
		$response->assertSee('/build/js/app/app-');
		$response->assertSee('/build/css/app-');
	}



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//    BACKEND ROUTES
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


	public function test_backend_route_capture() {

		$response = $this->get('/backend/capture-this-route');

		if(config('app.features.backend')) {

			$response->assertStatus(200);
			$response->assertSee('/build/js/backend/backend-');
			$response->assertSee('/build/css/backend-');
		}
		else {

			$response->assertStatus(301);
			$response->assertDontSee('/build/js/backend/backend-');
			$response->assertDontSee('/build/css/backend-');
		}
	}



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */

} // end class
