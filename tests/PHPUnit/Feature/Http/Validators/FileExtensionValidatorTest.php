<?php

/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//    INCLUDES
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


	namespace Tests\PHPUnit\Feature\Http\Validators;

	// Laravel
	use Tests\PHPUnit\TestCase;

	// App
	use App\Http\Validators\FileExtensionValidator;



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//    CLASS DECLARATION
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


class FileExtensionValidatorTest extends TestCase {



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//    DOMAIN
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


	/** @dataProvider provideFileExtensionData */
	public function test_file_extension_validator(string $extensions, string $input, bool $isValid) {

		// act
		$validator = new FileExtensionValidator();
		$result = $validator->validate('file', $input, explode(',', $extensions));

		// assert
		$this->assertEquals($isValid, $result);
	}


	static public function provideFileExtensionData() {

		return [
			"expected input" => ['jpg,png', 'image.jpg', true],
			"expected input" => ['jpg,png', 'image.png', true],
			"invalid input" => ['jpg,png', 'image.gif', false],
			"img url with query string" => ['jpg,png', 'image.jpg?query=string', true],
			"dot in filename" => ['jpg,png', 'image.with.dot.jpg', true],
		];
	}



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */

} // end class
