<?php
/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//    INCLUDES
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


	namespace Tests\PHPUnit\Feature\Notifications;

	// Laravel
	use Tests\PHPUnit\TestCase;
	use Illuminate\Foundation\Testing\RefreshDatabase;



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//    CLASS DECLARATION
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


class UserDeletedNotificationTest extends TestCase {

	use RefreshDatabase;



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//	MAIL
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


	public function test_notification_mail() {

		// arrange
		$user = $this->createUser();

		// act
		$notification = new \App\Notifications\UserDeletedNotification($user->name,$user->lang);
		$mailMessage = $notification->toMail($user);

		// assert: notification driver
		$this->assertEquals(['mail'], $notification->via($user));

		// assert: mail message
		$this->assertEquals('Benutzerkonto gelÃ¶scht', $mailMessage->subject);
		$this->assertEquals('Hallo '.$user->name, $mailMessage->greeting);
	}



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


} // end class

