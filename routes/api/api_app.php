<?php
/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//	INCLUDES
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


	// Laravel
	use Illuminate\Support\Facades\Route;

	// App
	use App\Helper\ApiRoutes;
	use App\Http\Controllers\App\Base\ContentController;
	use App\Http\Controllers\App\ProjectController;



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//	APP PUBLIC
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


	// Content
	Route::get('content', [ContentController::class,'getPublicContent'])->name('api.content');
	Route::post('contact', [ContentController::class,'contact'])->name('api.contact')->middleware('throttle:critical');

	// Models
	ApiRoutes::setModelAppRoutes('page', false, 'Base\\Page');
	ApiRoutes::setModelAppRoutes('item', false, 'Base\\Item');

	// project
	Route::post('project/scene/save', [ProjectController::class,'saveScene'])->name('api.project.scene.save');
	Route::get('project/scene/{slug}', [ProjectController::class,'getScene'])->name('api.project.scene');
	Route::get('project/{slug}', [ProjectController::class,'getPublicBySlug'])->name('api.project');

	// [add model app routes]



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//	APP PROTECTED
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


	Route::group(['middleware'=>'auth:sanctum'],function(){

		// project
		Route::get('project', [ProjectController::class,'getPublicList'])->name('api.project.list');
		Route::post('project/save', [ProjectController::class,'save'])->name('api.project.save');
		Route::post('project/delete', [ProjectController::class,'deleteModel'])->name('api.project.delete');
	});


