<?php
/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//    INCLUDES
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


	// laravel
	require_once __DIR__ . '/../../../../vendor/autoload.php';
	use Illuminate\Support\Str;



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//    MAIN
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


trait CreateAppControllerTest {



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//    APP CONTROLLER TEST
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


	protected function createAppControllerTest() {

		if($this->userInput['target'] == 'fragment') { return; }

		$this->fillTemplate('TemplateControllerTest.php', 'tests/PHPUnit/Feature/Http/Controllers/App/'.$this->userInput['name'].'ControllerTest.php', function($template) {

			$this->replaceLine($template, '{{page}}', $this->createAppControllerTestPage());
			$this->replaceLine($template, '{{includesLaravel}}', $this->createAppControllerTestIncludesLaravel());
			$this->replaceLine($template, '{{includesApp}}', $this->createAppControllerTestIncludesApp());

			return $template;
		});
	}



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//    PAGE
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


	protected function createAppControllerTestPage() {

		if($this->userInput['target'] != 'page') { return ''; }

		$template = file_get_contents(__DIR__ . '/../templates/TemplateControllerTestPage.php');

		$template = Str::replace('{{slug}}', $this->userInput['slug'], $template);
		$template = Str::replace('{{ModelClass}}', $this->userInput['name'], $template);

		return $template;
	}



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//    INCLUDES
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


	protected function createAppControllerTestIncludesLaravel() {

		$includes = "";

		if($this->userInput['target'] == 'page') {
		}

		return Str::replaceLast("\n\t", '', $includes);
	}


	protected function createAppControllerTestIncludesApp() {

		$includes = "";

		if($this->userInput['target'] == 'page') {
			$includes .= "use App\Models\App\Base\Fragment;\n\t";
		}

		return Str::replaceLast("\n\t", '', $includes);
	}



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


} // end trait
