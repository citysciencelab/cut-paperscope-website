<?php
/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//    INCLUDES
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


	// Laravel
	use Illuminate\Database\Schema\Blueprint;

	// App
	use Database\Migrations\Base\BaseMigration;



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//    CLASS CONSTRUCT
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


return new class extends BaseMigration
{

	protected string $tableName = 'projects';

	protected array $roles = [
		'user' => 		['create', 'edit', 'delete'],
		'editor' => 	['create', 'edit', 'delete'],
		'admin' => 		['create', 'edit', 'delete'],
	];



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//    UP
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


	public function create(Blueprint &$table): void {

		$this->setDefaultProps($table);
		$this->setSharingProps($table);

		// project properties
		$table->string('title',150)->nullable();
		$table->text('description')->nullable();

		// coordinates
		$table->float('start_longitude')->nullable();
		$table->float('start_latitude')->nullable();
		$table->float('end_longitude')->nullable();
		$table->float('end_latitude')->nullable();

		// scene
		$table->float('ratio')->nullable();
		$table->text('scene')->nullable();
		$table->text('mapping')->nullable();

		// relations
		$table->foreignUuid('user_id')->nullable()->constrained();

		// internal
		$table->index(['user_id']);

		$this->translate($table, ['description']);
	}



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


}; // end class
