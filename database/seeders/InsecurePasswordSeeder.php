<?php
/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//	NCLUDES
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


	namespace Database\Seeders;

	// Laravel
	use Illuminate\Database\Seeder;
	use Illuminate\Support\Facades\DB;
	use Ramsey\Uuid\Uuid;



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//	CLASS
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


class InsecurePasswordSeeder extends Seeder
{



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//	RUN
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


	public function run(): void {

		// load data
		$file = file_get_contents(__DIR__.'/../factories/Backend/InsecurePasswordData.json');
		$file = json_decode($file,true);

		// skip on error
		if($file==null) {
			echo  PHP_EOL . '### ERROR: Skipping seeding of InsecurePasswordData.json - invalid data found.' . PHP_EOL;
			return;
		}

		// create data
		$insert = [];
		foreach($file['data'] as $password) {
			$insert[] = [
				'id' => Uuid::uuid4(),
				'password' => $password
			];
		}

		DB::table('password_insecure')->insert($insert);
	}



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


} // end class
