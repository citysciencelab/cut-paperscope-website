/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//	INCLUDES
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


	import { ref, watch } from 'vue';
	import { useI18n } from 'vue-i18n'
	import { defineStore } from 'pinia'
	import { useApi } from '@global/composables/useApi';



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//	STORE
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


	export const useContentStore = defineStore('content',() => {

		const { locale } = useI18n();
		const { apiGet } = useApi();


		/////////////////////////////////
		// DATA
		/////////////////////////////////

		const settings = ref([]);
		const pages = ref(window.pages);


		/////////////////////////////////
		// LOAD
		/////////////////////////////////

		function load() {

			// set all props from api as store props
			apiGet('content', data => {
				settings.value = data.settings;
				pages.value = data.pages;
			})
			.catch(e => console.log(e));
		}

		watch(locale, load, {immediate: true});


		/////////////////////////////////
		// EXPORT
		/////////////////////////////////

		return {
			settings, pages,
			load,
		};
	})
