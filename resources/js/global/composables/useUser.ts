/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//	INCLUDES
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


	// vue
	import { ref, computed } from 'vue';
	import { storeToRefs } from 'pinia'

	// app
	import { useUserStore } from '@global/stores/UserStore';



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//	COMPOSABLE
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


export const useUser = () => {

	const store = useUserStore();


	/////////////////////////////////
	// USER
	/////////////////////////////////

	const { user } = storeToRefs(store);
	const userIsGuest = computed(() => user.value?.role == 'guest');
	const userIsMember = computed(() => user.value?.role == 'member');
	const userIsEditor = computed(() => user.value?.role == 'editor');
	const userIsAdmin = computed(() => user.value?.role == 'admin');


	/////////////////////////////////
	// SHOP
	/////////////////////////////////

	function getUserProduct(productId: string): any {

		return user.value?.products?.find((product: any) => product.id == productId);
	}

	const userHasSubscription = computed(() => {

		return userIsMember.value || userIsEditor.value || userIsAdmin.value;
	});


	/////////////////////////////////
	// EXPORT
	/////////////////////////////////

	return {
		user,
		userIsGuest, userIsMember, userIsEditor, userIsAdmin,
		getUserProduct, userHasSubscription,
	};



/*/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */



};
