<!--/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//    HTML
//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////-->


	<template>

		<Teleport v-if="store.showLightbox" to="body" aria-hidden="true">

			<div class="lightbox" ref="root"></div>

		</Teleport>

	</template>



<!--/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//    JAVASCRIPT
//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////-->


	<script setup>

		import { ref, useTemplateRef, watch, nextTick } from 'vue';
		import { useGlobalStore } from '@global/stores/GlobalStore';


		/////////////////////////////////
		// OPEN
		/////////////////////////////////

		const store = useGlobalStore();
		const root = useTemplateRef('root');

		watch(() => store.showLightbox, value => value ? open() : close());

		async function open() {

			await nextTick();
			gsap.from(root.value, {duration: 1.0, opacity: 0, ease: 'power3.out', clearProps: 'all'});
		}


		/////////////////////////////////
		// CLOSE
		/////////////////////////////////

		function close() {

			gsap.to(root.value, {duration: 0.2, y:"-=10", opacity: 0, scale: 0.8, ease: 'power3.out', clearProps: 'all', onComplete: () => {
				store.setLightbox(false);
			}});
		}

	</script>

