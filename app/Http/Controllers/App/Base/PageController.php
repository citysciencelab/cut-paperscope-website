<?php
/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//	INCLUDES
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


	namespace App\Http\Controllers\App\Base;

	// Laravel
	use App\Http\Controllers\App\AppController;
	use Illuminate\Support\Facades\Cache;
	use Illuminate\Http\JsonResponse;

	// App
	use App\Models\App\Base\Page;
	use App\Http\Resources\Base\PageResource;
	use App\Http\Resources\Base\PageListResource;
	use App\Http\Requests\App\Base\ListWithFilterRequest;



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//	CLASS CONSTRUCT
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


class PageController extends AppController {

	// model classes
	protected $modelClass = Page::class;
	protected $modelResourceClass = PageResource::class;
	protected $modelListResourceClass = PageListResource::class;

	// model relations
	protected $modelRelations = ['items','fragments'];
	protected $modelListRelations = [];

	// return model list with pagination
	protected $paginator = false;



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//	LIST FILTER
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


	protected function applyFilterWhere(&$stmt, ListWithFilterRequest &$request, bool $usePublished) {

		parent::applyFilterWhere($stmt, $request, $usePublished);

		$stmt->where('navi_visible', 1);

		return $stmt;
	}



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


} // end class
