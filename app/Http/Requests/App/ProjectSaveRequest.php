<?php
/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
// 	INCLUDES
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


	namespace App\Http\Requests\App;

	// Laravel
	use Hidehalo\Nanoid\Client;

	// App
	use App\Http\Requests\Model\BaseModelSaveRequest;



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
// 	CLASS CONSTRUCT
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


class ProjectSaveRequest extends BaseModelSaveRequest {


	protected $target = "projects";
	protected $targetClass = \App\Models\App\Project::class;



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//	VALIDATE
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


	protected function prepareForValidation(): void {

		$this->merge([
			'name' => $this->title,
			'slug' => $this->slug ? strtolower($this->slug) : (new Client())->formattedId('0123456789abcdefghjklmnpqrstuvwxyz', 9),
		]);
	}


	public function rules(): array {

		return $this->translate([

			...$this->getBaseRules(['sharing']),

			// project properties
			'title' =>				'bail|nullable|string|max:150',
			'description' =>		$this->rule('input-richtext').'|translate',

			// coordinates
			'start_longitude' =>	'bail|nullable|numeric',
			'start_latitude' =>		'bail|nullable|numeric',
			'end_longitude' =>		'bail|nullable|numeric',
			'end_latitude' =>		'bail|nullable|numeric',

			// scene
			'ratio' =>				'bail|nullable|numeric',
			'scene' =>				'bail|nullable|array',
			'mapping' =>			'bail|nullable|array',
		]);
	}



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//	ERROR MESSAGES
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


	// rename variables for form error messages
	public function attributes(): array {

		return [
			...parent::attributes(),
			//'start' => 	trans('Startdatum'),
		];
	}


	public function messages(): array {

		return [
			...parent::messages(),
		];
	}



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


} // end class
