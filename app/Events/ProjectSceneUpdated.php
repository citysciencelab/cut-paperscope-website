<?php
/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//	INCLUDES
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


	namespace App\Events;

	// Laravel
	use Illuminate\Contracts\Broadcasting\ShouldBroadcast;
	use Illuminate\Broadcasting\Channel;
	use Illuminate\Broadcasting\PrivateChannel;
	use Illuminate\Foundation\Events\Dispatchable;
	use Illuminate\Queue\SerializesModels;

	// App
	use App\Models\App\Project;
	use App\Http\Resources\ProjectSceneResource;



/*///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//	CLASS
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


class ProjectSceneUpdated implements ShouldBroadcast {

    use Dispatchable, SerializesModels;

	public $project;


	public function __construct(Project $project) {

		$this->project = $project;
	}


	public function broadcastOn(): Channel {

		return new PrivateChannel('project.'.$this->project->slug);
	}


	public function broadcastWith(): array {

		return (new ProjectSceneResource($this->project))->toArray(request());
	}



/*/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */


}
